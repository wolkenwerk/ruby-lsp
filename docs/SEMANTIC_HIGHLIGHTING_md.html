<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>SEMANTIC_HIGHLIGHTING - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
  var index_rel_prefix = "./";
</script>

<script src="./js/navigation.js" defer></script>
<script src="./js/search.js" defer></script>
<script src="./js/search_index.js" defer></script>
<script src="./js/searcher.js" defer></script>
<script src="./js/darkfish.js" defer></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">


<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>



  <ul class="link-list" role="directory">
              <li>
            <details open>
              <summary>      <a href="#label-Semantic+highlighting">Semantic highlighting</a>
</summary>
              <ul class="link-list" role="directory">
                          <li>      <a href="#label-Token+types">Token types</a>
          <li>      <a href="#label-Token+list">Token list</a>

              </ul>
            </details>
          </li>

  </ul>
</div>


  <div id="project-metadata">
    
<div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
    <li><a href="./CODE_OF_CONDUCT_md.html">CODE_OF_CONDUCT</a>
    <li><a href="./CONTRIBUTING_md.html">CONTRIBUTING</a>
    <li><a href="./EDITORS_md.html">EDITORS</a>
    <li><a href="./README_md.html">README</a>
    <li><a href="./SEMANTIC_HIGHLIGHTING_md.html">SEMANTIC_HIGHLIGHTING</a>
    <li><a href="./SERVER_EXTENSIONS_md.html">SERVER_EXTENSIONS</a>
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page SEMANTIC_HIGHLIGHTING.md">

<h1 id="label-Semantic+highlighting">Semantic highlighting<span><a href="#label-Semantic+highlighting">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>The Ruby LSP supports semantic highlighting. This feature informs editors about the right token types for each part of the code to allow for rich and accurate highlighting. The strategy taken by the Ruby LSP is to only return tokens for syntax that is ambiguous in Ruby (as opposed to all existing tokens) to optimize for performance.</p>

<p>An example of ambiguous syntax in Ruby are local variables and method calls. If you look at this line in isolation:</p>

<pre class="ruby"><span class="ruby-identifier">foo</span>
</pre>

<p>it is not possible to tell if <code>foo</code> is a local variable or a method call. It depends on whether <code>foo</code> was assigned to something before or not. This is one scenario where semantic highlighting removes the ambiguity for themes, returning the correct token type by statically analyzing the code.</p>

<p>To enhance a theme’s Ruby syntax highlighting using the Ruby LSP, check the information below. You may also want to check out the <a href="https://github.com/Shopify/vscode-shopify-ruby/blob/main/themes/dark_spinel.json">Spinel theme</a> as an example, which uses all of the Ruby LSP’s semantic highlighting information.</p>

<h2 id="label-Token+types">Token types<span><a href="#label-Token+types">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>According to the LSP specification, language servers can either use token types and modifiers from the <a href="https://microsoft.github.io/language-server-protocol/specification#semanticTokenTypes">default list</a> or contribute new semantic tokens of their own. Currently, the Ruby LSP does not contribute any new semantic tokens and only uses the ones contained in the default list.</p>

<h2 id="label-Token+list">Token list<span><a href="#label-Token+list">&para;</a> <a href="#top">&uarr;</a></span></h2>

<table role="table">
<thead>
<tr>
<th>Syntax</th>
<th>Type.Modifier</th>
<th>Note</th>
</tr>
</thead>
<tbody>
<tr>
<td>Sorbet annotation methods such as ‘let` or `cast`</td>
<td>type</td>
<td>Not every annotation is handled</td>
</tr>
<tr>
<td>Method calls with any syntax</td>
<td>method</td>
<td></td>
</tr>
<tr>
<td>Constant references (including classes and modules)</td>
<td>namespace</td>
<td>We don’t yet differentiate between module and class references</td>
</tr>
<tr>
<td>Method definition</td>
<td>method.declaration</td>
<td></td>
</tr>
<tr>
<td>self</td>
<td>variable.default_library</td>
<td></td>
</tr>
<tr>
<td>Method, block and lambda arguments</td>
<td>parameter</td>
<td></td>
</tr>
<tr>
<td>Class declaration</td>
<td>class.declaration</td>
<td></td>
</tr>
<tr>
<td>Module declaration</td>
<td>class.declaration</td>
<td></td>
</tr>
</tbody>
</table>

</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.5.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

